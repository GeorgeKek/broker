$(window).load((function(){PdfRender.init()}));var PdfRender={minHeightSeted:!1,renderedPdfs:[],init:function(){},renderOnePdf:function(e){$(".pdf-container").attr("id",$(e).attr("data-doc")).attr("data-pdf-id",$(e).attr("data-doc")),this.renderPdf($(e).attr("data-doc"),(function(){PdfRender.minHeightSeted||($(".pdf-container").css({"min-height":$("canvas").first().height()+"px"}),PdfRender.minHeightSeted=!0)})),pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.2.2/pdf.worker.min.js"},renderAllPdfs:function(){for(var e=$("._all-docs-popup").find(".pdf-container"),n=1;n<=e.length;n++)this.renderPdf(n,(function(){PdfRender.minHeightSeted||($(".pdf-container").css({"min-height":$("canvas").first().height()+"px"}),PdfRender.minHeightSeted=!0)})),pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.2.2/pdf.worker.min.js"},renderFirstPdf:function(){this.renderPdf(0,(function(){PdfRender.minHeightSeted||($(".pdf-container").css({"min-height":$("canvas").first().height()+"px"}),PdfRender.minHeightSeted=!0)}))},inViewport:function(e){var n=$(e).offset().top,t=n+$(e).outerHeight(),d=$(window).scrollTop(),i=d+$(window).height();return t>d&&n<i},renderPdf:function(e,n){if(this.renderedPdfs.push(e),e>=window.pdfToRender.data.result.length)return!1;var t=window.pdfToRender.data.result[e].link_file;pdfjsLib.getDocument(t).promise.then((function(t){for(var d="",i=1;i<t._pdfInfo.numPages+1;i++)d+='<canvas id="canvas-'+e+"-"+i+'" style="width: 100%;"></canvas>';$('.pdf-container[data-pdf-id="'+e+'"]').append(d);for(i=1;i<t._pdfInfo.numPages+1;i++)t.getPage(i).then((function(t){var d=t.getViewport({scale:2.5}),i=document.getElementById("canvas-"+e+"-"+(t.pageIndex+1)),r=i.getContext("2d");i.height=d.height,i.width=d.width;var a={canvasContext:r,viewport:d},f=t.render(a);void 0!==n&&f.promise.then(n)}));OpenAcc.loadPdf()})).catch((function(n){$('.pdf-container[data-pdf-id="'+e+'"]').html('<div style="margin: 25px;"> Произошла ошибка при загрузке <a href="'+t+'" target="_blank">pdf&nbsp;файла</a> </div>')}))},renderPdfs:function(e){for(var n=0;n<e;n++)-1==this.renderedPdfs.indexOf(n+1)&&this.renderPdf(n+1)},scrollToDoc:function(e){$("html, body").animate({scrollTop:$('.pdf-container[data-pdf-id="'+e+'"]').offset().top-$(".fixed-header").height()},200)}};