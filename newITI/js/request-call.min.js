!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var i={};t(i),e.bodyScrollLock=i}}(this,function(e){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var l=!1;if("undefined"!=typeof window){var t={get passive(){l=!0}};window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}var a="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),s=[],c=!1,d=-1,u=void 0,p=void 0,m=function(t){return s.some(function(e){return!(!e.options.allowTouchMove||!e.options.allowTouchMove(t))})},f=function(e){var t=e||window.event;return!!m(t.target)||1<t.touches.length||(t.preventDefault&&t.preventDefault(),!1)},i=function(){setTimeout(function(){void 0!==p&&(document.body.style.paddingRight=p,p=void 0),void 0!==u&&(document.body.style.overflow=u,u=void 0)})};e.disableBodyScroll=function(n,e){if(a){if(!n)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(n&&!s.some(function(e){return e.targetElement===n})){var t={targetElement:n,options:e||{}};s=[].concat(o(s),[t]),n.ontouchstart=function(e){1===e.targetTouches.length&&(d=e.targetTouches[0].clientY)},n.ontouchmove=function(e){var t,i,r,o;1===e.targetTouches.length&&(i=n,o=(t=e).targetTouches[0].clientY-d,!m(t.target)&&(i&&0===i.scrollTop&&0<o?f(t):(r=i)&&r.scrollHeight-r.scrollTop<=r.clientHeight&&o<0?f(t):t.stopPropagation()))},c||(document.addEventListener("touchmove",f,l?{passive:!1}:void 0),c=!0)}}else{r=e,setTimeout(function(){if(void 0===p){var e=!!r&&!0===r.reserveScrollBarGap,t=window.innerWidth-document.documentElement.clientWidth;e&&0<t&&(p=document.body.style.paddingRight,document.body.style.paddingRight=t+"px")}void 0===u&&(u=document.body.style.overflow,document.body.style.overflow="hidden")});var i={targetElement:n,options:e||{}};s=[].concat(o(s),[i])}var r},e.clearAllBodyScrollLocks=function(){a?(s.forEach(function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),c&&(document.removeEventListener("touchmove",f,l?{passive:!1}:void 0),c=!1),s=[],d=-1):(i(),s=[])},e.enableBodyScroll=function(t){if(a){if(!t)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");t.ontouchstart=null,t.ontouchmove=null,s=s.filter(function(e){return e.targetElement!==t}),c&&0===s.length&&(document.removeEventListener("touchmove",f,l?{passive:!1}:void 0),c=!1)}else 1===s.length&&s[0].targetElement===t?(i(),s=[]):s=s.filter(function(e){return e.targetElement!==t})}}),function(e,t){"function"==typeof define&&define.amd?define(t):e.VMasker=t()}(this,function(){var n=[8,9,16,17,18,36,37,38,39,40,91,92,93],b=function(e){return(e={precision:(e=e||{}).hasOwnProperty("precision")?e.precision:2,separator:e.separator||",",delimiter:e.delimiter||".",unit:e.unit&&e.unit.replace(/[\s]/g,"")+" "||"",suffixUnit:e.suffixUnit&&" "+e.suffixUnit.replace(/[\s]/g,"")||"",zeroCents:e.zeroCents,lastOutput:e.lastOutput}).moneyPrecision=e.zeroCents?0:e.precision,e},i=function(e){this.elements=e};i.prototype.unbindElementToMask=function(){for(var e=0,t=this.elements.length;e<t;e++)this.elements[e].lastOutput="",this.elements[e].onkeyup=!1,this.elements[e].onkeydown=!1,this.elements[e].value.length&&(this.elements[e].value=this.elements[e].value.replace(/\D/g,""))},i.prototype.bindElementToMask=function(i){for(var r=this,e=function(e){var t=(e=e||window.event).target||e.srcElement;(function(e){for(var t=0,i=n.length;t<i;t++)if(e==n[t])return!1;return!0})(e.keyCode)&&setTimeout(function(){r.opts.lastOutput=t.lastOutput,t.value=l[i](t.value,r.opts),t.lastOutput=t.value,t.setSelectionRange&&r.opts.suffixUnit&&t.setSelectionRange(t.value.length,t.value.length-r.opts.suffixUnit.length)},0)},t=0,o=this.elements.length;t<o;t++)this.elements[t].lastOutput="",this.elements[t].onkeyup=e,this.elements[t].value.length&&(this.elements[t].value=l[i](this.elements[t].value,this.opts))},i.prototype.maskMoney=function(e){this.opts=b(e),this.bindElementToMask("toMoney")},i.prototype.maskNumber=function(){this.opts={},this.bindElementToMask("toNumber")},i.prototype.maskPattern=function(e){this.opts={pattern:e},this.bindElementToMask("toPattern")},i.prototype.unMask=function(){this.unbindElementToMask()};var l=function(e){if(!e)throw new Error("VanillaMasker: There is no element to bind.");var t="length"in e?e.length?e:[]:[e];return new i(t)};return l.toMoney=function(e,t){if((t=b(t)).zeroCents){t.lastOutput=t.lastOutput||"";var i="("+t.separator+"[0]{0,"+t.precision+"})",r=new RegExp(i,"g"),o=e.toString().replace(/[\D]/g,"").length||0,n=t.lastOutput.toString().replace(/[\D]/g,"").length||0;e=e.toString().replace(r,""),o<n&&(e=e.slice(0,e.length-1))}for(var l=e.toString().replace(/[\D]/g,""),a=new RegExp("^(0|\\"+t.delimiter+")"),s=new RegExp("(\\"+t.separator+")$"),c=l.substr(0,l.length-t.moneyPrecision),d=c.substr(0,c.length%3),u=new Array(t.precision+1).join("0"),p=0,m=(c=c.substr(c.length%3,c.length)).length;p<m;p++)p%3==0&&(d+=t.delimiter),d+=c[p];if(d=(d=d.replace(a,"")).length?d:"0",!t.zeroCents){var f=l.length-t.precision,g=l.substr(f,t.precision),h=g.length,v=t.precision>h?t.precision:h;u=(u+g).slice(-v)}return(t.unit+d+t.separator+u+t.suffixUnit).replace(s,"")},l.toPattern=function(e,t){var i,r="object"==typeof t?t.pattern:t,o=r.replace(/\W/g,""),n=r.split(""),l=e.toString().replace(/\W/g,""),a=l.replace(/\W/g,""),s=0,c=n.length;for(i=0;i<c;i++){if(s>=l.length){if(o.length==a.length)return n.join("");break}"9"===n[i]&&l[s].match(/[0-9]/)||"A"===n[i]&&l[s].match(/[a-zA-Z]/)||"S"===n[i]&&l[s].match(/[0-9a-zA-Z]/)?n[i]=l[s++]:("9"===n[i]||"A"===n[i]||"S"===n[i])&&(n=n.slice(0,i))}return n.join("").substr(0,i)},l.toNumber=function(e){return e.toString().replace(/(?!^-)[^0-9]/g,"")},l});var _gscq={push:function(e){itiRqCall.showForm(e[1])}};try{(itiRqCall={styles:".rqc-form-wr,.rqc-form-wr *{box-sizing:border-box;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;text-transform:inherit;text-decoration:inherit;white-space:normal}.rqc-form-wr{position:fixed;width:100%;height:100%;z-index:9999999999;overflow-y:auto;font-size:14px;-webkit-transition:.2s;-o-transition:.2s;transition:.2s;display:none;top:0;left:0}.rqc-form-wr.rqc-form-wr_opened .rqc-form-overlay{visibility:visible;opacity:1}.rqc-form-wr.rqc-form-wr_opened .rqc-form-body{opacity:1;-webkit-transform:translateY(0);-ms-transform:translateY(0);-o-transform:translateY(0);transform:translateY(0)}.rqc-form-overlay{position:fixed;width:100%;height:100%;top:0;left:0;background-color:rgba(0,0,0,.42);z-index:-1;visibility:hidden;opacity:0}.rqc-form-body-wr{position:absolute;height:100%;width:100%;top:0;left:0;bottom:0;right:0;margin:auto;display:-webkit-flex;display:-moz-flex;display:-ms-flex;display:-o-flex;display:flex;justify-content:space-between;-ms-align-items:center;align-items:center;overflow-y:auto;padding-bottom:20px;padding-top:20px}.rqc-form-body{margin-bottom:20px;max-width:410px;min-width:370px;top:0;left:0;bottom:0;right:0;margin-left:auto;margin-right:auto;background-color:#fff;padding:20px;border-radius:4px;box-shadow:0 12px 27.26px 1.74px rgba(0,0,0,.4);overflow:hidden;margin-top:auto;margin-bottom:auto;-webkit-transition:.3s;-o-transition:.3s;transition:.3s;-webkit-transform:translateY(-100%);-ms-transform:translateY(-100%);-o-transform:translateY(-100%);transform:translateY(-100%);opacity:0}.rqc-form-body-top{position:relative}.rqc-form__header{font-size:18px;font-weight:700;margin-bottom:16px;line-height:1.2}.rqc-form-close{position:absolute;width:44px;height:44px;top:-20px;right:-20px;padding-top:24px;padding-right:24px;cursor:pointer}.rqc-form-close:hover .rqc-form-close__icon{-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);-o-transform:rotate(90deg);transform:rotate(90deg)}.rqc-form-close__icon{-webkit-transition:.2s;-o-transition:.2s;transition:.2s;-webkit-transform-origin:center center;-moz-transform-origin:center center;-ms-transform-origin:center center;-o-transform-origin:center center;transform-origin:center center;background-color:red;position:absolute;top:20px;right:20px}.rqc-form-close__icon:before,.rqc-form-close__icon:after{position:absolute;content:'';width:2px;height:14px;background-color:#d8d8d8;top:0;left:0;-webkit-transform-origin:center;-moz-transform-origin:center;-ms-transform-origin:center;-o-transform-origin:center;transform-origin:center;top:0;left:0;right:0;bottom:0;margin:auto}.rqc-form-close__icon:before{-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.rqc-form-close__icon:after{-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}.rqc-form-field{margin-bottom:15px}.rqc-form-field__group{padding-top:10px}.rqc-form-field__group-delimeter{color:rgba(0,0,0,0.7);font-size:12px;margin-bottom:15px}.rqc-form-field__label{color:#333;font-size:14px;line-height:1.15;display:block;margin-bottom:4px}.rqc-form-field__input{display:block;height:40px;line-height:40px;width:100%;border:solid 1px #f0f0f0;border-radius:3px;outline:0 none!important;background-color:#fff!important;font-size:inherit!important;padding:0 8px!important;color:#333!important}.rqc-form-field__input.error{border-color:#f04f48}.rqc-radio-wr{display:block;cursor:pointer;line-height:1.2;display:block;position:relative;min-height:14px;border-radius:2px;padding:10px;overflow:hidden;background:#f5f5f5;transition:background-color .2s ease-out!important;margin-bottom:4px;border-radius:2px}.rqc-radio-wr:hover{background-color:#e8e8e8}.rqc-radio{position:absolute;visibility:hidden;opacity:0;top:0;left:0;width:1px;height:1px}.rqc-radio:checked ~ .rqc-radio-box:after{position:absolute;content:'';width:8px;height:8px;left:3px;top:50%;margin-top:-4px;background-color:black;border-radius:100%}.rqc-radio-wr:last-child{margin-bottom:0}.rqc-radio-box{padding-left:23px;position:relative}.rqc-radio-box:before{position:absolute;content:'';width:14px;height:14px;background-color:#fff;border-radius:100%;left:0;top:50%;margin-top:-7px}.rqc-agreement{margin-top:15px;opacity:.5;font-size:12px;line-height:16px}.rqc-agreement a{color:inherit;text-decoration:underline}.rqc-submit-wr{margin-top:34px}.rqc-btn,.rqc-btn:active,.rqc-btn:hover{background:#f04f48;color:#fff}.rqc-btn{width:100%;display:block;font-size:14px;padding:5px 26px;text-align:center;border-radius:2px;vertical-align:middle;height:auto;border:0}.rqc-btn__text{font-size:14px;font-weight:700;vertical-align:middle;line-height:32px;word-wrap:normal;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block;max-width:100%}",widgetContainer:'<div class="rqc-form-wr _rqc-form-wr"><div class="rqc-form-overlay"></div></div>',widgetBody:'<div class="rqc-form-body-wr _rqc-form-body-wr"><div class="rqc-form-body _rqc-form-body"><div class="rqc-form-body-top"><div class="rqc-form__header">#title#</div><div class="rqc-form-close" onclick="itiRqCall.hideForm()"><div class="rqc-form-close__icon"></div></div></div><form action="#" class="rqc-form" novalidate="" onsubmit="itiRqCall.submitForm(this, event)">#inputs# #enumsList#<div class="rqc-agreement">#description#</div><div class="rqc-submit-wr"><button class="rqc-btn" type="submit"><span class="rqc-btn__text">#btnText#</span></button></div></form></div></div>',openClass:"rqc-form-wr_opened",rqPopup:null,rqOverlay:null,baseUrl:"https://iticapital.ru/",newWidget:"",widgets:{},openedWidgetID:null,init:function(){"undefined"==typeof ga&&(ga=function(){}),"iticapital.ru"!=window.location.host&&(this.baseUrl="http://pre-prod.iticapital.ru/"),this.getWidgets(),this.setWidgetContainer(),this.setStyles(),document.onclick=this.listClicks},getWidgets:function(){this.sendAjax({url:this.baseUrl+"widget-constructor/getwidgets/",method:"get",success:function(e){itiRqCall.widgets=JSON.parse(e.currentTarget.response).result},error:function(e){console.log("ошибка при получении виджетов",e)}})},setWidgetContainer:function(){var e=document.createElement("div");e.innerHTML=this.widgetContainer,document.body.appendChild(e)},replaceWidgetContainer:function(){var e=document.querySelector("._rqc-form-wr"),t=document.createElement("div");t.classList.add("rqc-form-wr"),t.classList.add("_rqc-form-wr"),t.innerHTML='<div class="rqc-form-overlay"></div>',e.parentNode.replaceChild(t,e)},listClicks:function(e){var t=null;try{null!=e.target.getAttribute("data-gsc-widget")?t=e.target.getAttribute("data-gsc-widget"):null!=e.target.parentNode.getAttribute("data-gsc-widget")&&(t=e.target.parentNode.getAttribute("data-gsc-widget")),null!=t&&itiRqCall.showForm(t)}catch(e){console.log(e)}},setStyles:function(){var e=this.styles,t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");t.appendChild(i),i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),e=this.styles=""},addClass:function(e,t){-1==e.className.split(" ").indexOf(t)&&(e.className+=" "+t)},removeClass:function(e,t){e.className=e.className.replace(t,"")},showForm:function(e){if(void 0===this.widgets[e])return!1;this.addFields(e),this.getHtmlNodes(),this.initMask(),this.val.init(),this.openedWidgetID=e,this.rqPopup.setAttribute("style","display: block;"),setTimeout(function(){bodyScrollLock.disableBodyScroll(itiRqCall.rqPopup,{reserveScrollBarGap:!0}),itiRqCall.addClass(itiRqCall.rqPopup,itiRqCall.openClass),itiRqCall.addClass(itiRqCall.rqOverlay,itiRqCall.openClass)},10),document.addEventListener("keyup",this.closeOnKeyUp)},addFields:function(e){var t=this.widgets[e];this.newWidget=this.widgetBody.replace(/#title#/g,t.title).replace(/#description#/g,t.description).replace(/#btnText#/g,t.buttonTxt),this.addInputs(e)},addInputs:function(e){for(var t="",i=0;i<this.widgets[e].fields.length;i++){var r=this.widgets[e].fields[i],o=this.getFieldClasses(r.type);"enum"!==r.type?(r.classesList=o.classes,t+='<div class="rqc-form-field"><label class="rqc-form-field__label">#fieldLabel#</label><input type="#fieldType#" name="#fieldName#" placeholder="#placeholder#" class="rqc-form-field__input #class-list#" onblur="ga(\'send\', \'event\', \'rqcall\', \'Виджет #fieldId#, клик в поле #fieldLabel#\');"></div>'.replace(/#fieldLabel#/g,r.label).replace(/#fieldName#/g,r.fieldName).replace(/#fieldType#/g,"phone"===r.type?"tel":r.type).replace(/#placeholder#/g,r.placeholder).replace(/#class-list#/g,r.classesList.join(" ")).replace(/#fieldId#/g,e).replace(/#fieldLabel#/g,r.label)):itiRqCall.addEnumList(r)}this.newWidget=this.newWidget.replace(/#inputs#/g,t).replace(/#enumsList#/g,""),this.setWidgetHtml()},addEnumList:function(e){for(var t='<div class="rqc-time-list"><div class="rqc-form-field__label">Выберите удобное время для звонка:</div><div class="rqc-time-list-items">#enumsListItems#</div></div>',i="",r=0;r<e.enumItemsList.length;r++){var o=e.enumItemsList[r],n="";0==r&&(n='checked=""'),i+='<label class="rqc-radio-wr" onclick="ga(\'send\', \'event\', \'rqcall\', \'time #timeNum#\');"><input type="radio" class="rqc-radio" name="#fieldName#" #isChecked# value="#enumValue#"><span class="rqc-radio-box"><span class="rqc-radio-box__text">#enumLabel#</span></span></label>'.replace(/#timeNum#/g,o.label).replace(/#fieldName#/g,e.fieldName).replace(/#enumValue#/g,o.value).replace(/#enumLabel#/g,o.label).replace(/#isChecked#/g,n)}t=t.replace(/#enumsListItems#/g,i),this.newWidget=this.newWidget.replace(/#enumsList#/g,t)},getFieldClasses:function(e){switch(e){case"email":return{classes:["_rqc-email","_rqc-required"]};case"phone":return{classes:["_rqc-phone-mask","_rqc-required"]};default:return{classes:[]}}},getHtmlNodes:function(){this.rqPopup=document.querySelector(".rqc-form-wr"),this.rqOverlay=document.querySelector(".rqc-form-overlay")},initMask:function(){var e=document.querySelectorAll("._rqc-phone-mask");if(!e.length)return!1;VMasker(e[0]).maskPattern("+9 (999) 999-99-99")},hideForm:function(){document.removeEventListener("keyup",this.closeOnKeyUp),this.removeClass(this.rqPopup,this.openClass),setTimeout(function(){itiRqCall.rqPopup.setAttribute("style","display: none;"),bodyScrollLock.clearAllBodyScrollLocks({reserveScrollBarGap:!0}),itiRqCall.clearHtmlNodes(),itiRqCall.replaceWidgetContainer()},240),this.openedWidgetID=null},clearHtmlNodes:function(){this.rqPopup=null,this.rqOverlay=null},setWidgetHtml:function(){document.querySelector(".rqc-form-wr").innerHTML+=this.newWidget},submitForm:function(e,t){t.preventDefault();var i=itiRqCall.getData(e,this.openedWidgetID);this.val.validate(e)&&(itiRqCall.sendForm(i),itiRqCall.hideForm())},sendForm:function(e,t){itiRqCall.sendAjax({url:itiRqCall.baseUrl+"widget-constructor/handlewidget/",method:"post",data:e,success:t,error:function(){ga("send","event","rqcall","ERROR form not sended")}})},sendWidgetData:function(e,t,i){var r=itiRqCall.getData(e,t);itiRqCall.sendForm(r,i)},closeOnKeyUp:function(e){27===e.keyCode&&itiRqCall.hideForm()},val:{emailEl:"",phoneEl:"",init:function(){this.emailEl=document.querySelectorAll(".rqc-form")[0].querySelectorAll("._rqc-email")[0],this.phoneEl=document.querySelectorAll(".rqc-form")[0].querySelectorAll("._rqc-phone-mask")[0],this.emailEl&&this.emailEl.addEventListener("input",this.checkEmail),this.phoneEl&&this.phoneEl.addEventListener("input",this.checkPhone)},checkEmail:function(){return!itiRqCall.val.emailEl||(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(itiRqCall.val.emailEl.value)?(itiRqCall.removeClass(itiRqCall.val.emailEl,"error"),!0):(itiRqCall.addClass(itiRqCall.val.emailEl,"error"),!1))},checkPhone:function(){return!itiRqCall.val.phoneEl||(11==VMasker.toNumber(itiRqCall.val.phoneEl.value).length?(itiRqCall.removeClass(itiRqCall.val.phoneEl,"error"),!0):(itiRqCall.addClass(itiRqCall.val.phoneEl,"error"),!1))},validate:function(e){return!(!this.checkEmail()&&!this.checkPhone())}},serializeForm:function(e){return Array.from(e.querySelectorAll("input, select, textarea")).filter(function(e){return e.name}).reduce(function(e,t){return"radio"===t.type&&t.checked?e[t.name]=t.value:"radio"!=t.type&&(e[t.name]=t.value),e},{})},getData:function(e,t){var i=this.serializeForm(e);return void 0!==ga.getAll&&(i.gaId=ga.getAll()[0].get("clientId")),i.link=window.location.href,i.widgetId=void 0!==t?t:this.openedWidgetID,i},sendAjax:function(t){var e=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);e.open(t.method,t.url,!0),e.onload=function(e){"function"==typeof t.success&&t.success(e)},e.onerror=function(e){"function"==typeof t.error&&t.error(e)},void 0!==t.data?e.send(JSON.stringify(t.data)):e.send()}}).init()}catch(e){console.log(e);var simpleRqCall=function(){window.open(this.baseUrl+"/request-call-simple","_blank").focus()};document.onclick=function(e){null==e.target.getAttribute("data-gsc-widget")&&null==e.target.parentNode.getAttribute("data-gsc-widget")||simpleRqCall()};var itiRqCall={showForm:function(){simpleRqCall()}}}